<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{default.html}">
<th:block layout:fragment="content">
    <div class="row">
        <h4>
            Подготовка к аттестации работников организаций по курсу:
        </h4>
    </div>
    <div class="row">
        <th:block
                th:replace="blocks/courses-list::courses-list(courses=${allCourses}, showControls=${false})"></th:block>
    </div>
    <div class="row">
        <a th:href="@{/section/{id}(id=${test.section.id})}" th:text="${test.section.name}"></a>
    </div>
    <div class="row heading" th:text="'Билет №'+${ ticketNum}"></div>
    <div class="row " th:if="${ticketChecked and incorrectCount > ticketDto.errorsCount }">
        <p class="errors-heading"> Тест не пройден! Вы совершили более
            <th:block th:text="${ticketDto.errorsCount}"></th:block>
            ошибок.
        </p>
        <p th:text="'Правильных ответов: '+${checkedCorrect}+' из '+${corrects}"></p>
    </div>
    <form th:action="@{/ticket/check/(ticketNum=${ticketNum})}" th:method="post" th:object="${ticketDto}">
        <input type="hidden" th:field="${ticketDto.testId}"/>
        <input type="hidden" th:field="${ticketDto.testId}"/>
        <input type="hidden" th:field="${ticketDto.errorsCount}"/>
        <div class="ticket-table">
            <th:block th:each="question, questIter : *{questionList}">
                <th:block
                        th:replace="blocks/question-item :: question-item(${question}, ${questIter.index})"></th:block>

            </th:block>

        </div>
        <button type="submit" class="btn btn-primary"
                style="float:right; margin-right:0;"
                th:if="${not ticketChecked}">Проверить</button>
        <a th:href="@{/tests/{id}(id=${ticketDto.testId})}">Назад к билетам</a>


    </form>


</th:block>
</html>